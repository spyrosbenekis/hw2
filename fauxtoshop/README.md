Αρχικά, αφού δηλωθούν οι απαραίτητες βιβλιοθήκες, τότε ορίζονται κάποιες σταθερές που αναφέρονται στα μεγέθη των bytes που βρίσκονται τα μεγέθη αυτών που αναφέρονται στις μεταβλητές αυτές. Στην main δηλώνεται ένας στατικός πίνακας headers στον οποίο πρόκειται να αποθηκευτούν τα στοιχεία του "standard" offset. Στη συνέχεια αποθηκεύονται στον πίνακα headers τα στοιχεία της stdin που αφορούν το header, με την χρήση της fread. Η fread περιέχετε σε ένα if που ελέγχει αν η fread επέστρεψε την τιμή 1, δηλαδή αν διάβασε λιγότερα από 54 bytes. Μετά στην μεταβλητή bitCount παίρνει το 29ο byte της επικεφαλίδας και με τον έλεγχο if (bitCount != 24) exit(1) ελέγχετε εάν το βάθος χρώματος είναι 24 bits.  Στις μεταβλητές width και height αποθηκεύονται από την stdin τα αντίστοιχα bytes και στην συνέχεια αντιστρέφονται. Με τον έλεγχο if(headers[10] > 0x36) ελέγχεται αν το headers[10], δηλαδή το offset, είναι μεγαλύτερο από 54. Αν αυτό ισχύει τότε στην μεταβλητή offset αποθηκεύετε σε μορφή ακεραίου το 10ο byte, που είναι το μέγεθος του offset και αποθηκεύεται σε αυτήν η διαφορά offset-54, αφού τα πρώτα 54 bytes αποθηκεύονται στον πίνακα headers. Έτσι με χρήση της malloc δεσμεύετε δυναμικά ο πίνακας off μεγέθους της παραπάνω διαφοράς. Στην συνέχεια με τον βρόχο for αποθηκεύονται τα περαιτέρω στοιχεία που απομένουν στον πίνακα μέσω της getchar. Στη συνέχεια με χρήση της malloc δεσμεύω μνήμη για τον δισδιάστατο πίνακα color που θα αποθηκεύσω τα pixel της εικόνας. Ο δείκτης color δεσμεύει μνήμη για έναν δείκτη προς δείκτες προς χαρακτήρες (char ***). Ο αριθμός των δεικτών είναι ίσος με το ύψος (height) του πίνακα. Κάθε δείκτης αντιπροσωπεύει ένα επίπεδο του πίνακα. Με στον βρόγχο for δεσμεύεται χώρος για κάθε γραμμή με πλήθος ίσο με το πλάτος της εικόνας στην stdin. Η εντολή int padding = (4 - (width * 3) % 4) % 4 υπολογίζει το πλήθος των "padding" bytes που προστίθενται σε κάθε γραμμή του χρωματικού πίνακα ενός αρχείου BMP. Στη συνέχεια, εκτελούνται δύο βρόγχοι στους οποίους αρχικά δεσμεύεται χώρος για κάθε στήλη αντίστοιχης της γραμμής, με την fread αποθηκεύεται στο color[i][j] κάθε pixel και ελέγχετε αν είναι ίση με τρία. Ο δεύτερος εσωτερικός βρόγχος χρησιμοποιείται για να προσπεράσουμε το padding. Αφού τελειώσει η επανάληψη, τότε υπολογίζετε εκ νέου το padding για την καινούργια εικόνα. Στη συνέχεια εκτελούνται δύο βρόγχοι for όπου μεταφέρεται ο πίνακας color αντεστραμμένος. Αυτό επιτυγχάνεται διότι αντί να αρχίζουμε να γράφουμε από το αρχικό width (αριστερό άκρο) και πηγαίνουμε προς τα δεξιά, αρχίζουμε από το τελευταίο (πίσω) width και πηγαίνουμε προς τα αριστερά. Επίσης στον ίδιο βρόγχο προστίθετε το padding αν είναι απαραίτητο. Τέλος απελευθερώνετε όλος ο χώρος που έχει δεσμευθεί.